<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript</title>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="../css/styles.css">
    <script defer type="module" src="../js/scripts.js"></script>

    <!-- cargar librería para implementar el diseño de VSC en html -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
</head>

<body>

    <!-- Contenedor del header (se carga dinámicamente) -->
    <header id="header-container"></header>

    <!-- Botón de hamburguesa -->
    <button class="hamburger" aria-label="Abrir menú">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </button>

    <main>
        <!-- Contenedor del aside (se carga dinámicamente) -->
        <aside id="aside-container"></aside>

        <!------------------------------------------------------- Sección principal -------------------------------------------->
        <section>
            <h2>Funciones</h2>
            <p>Las funciones es la mejor forma de reutilizar el código de manera eficiente y de poder organizarlo</p>
            <button type="button" id="bsaludo">Saludo</button>
            <button type="button" id="bnumero">Adivina el número</button>
            <br><br>
            <p>Sintaxis de una función: </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    function saludo() {
        console.log('Hola a todos');
    }
        
    saludo(); //llamada a la función
    // Hola a todos
            </code></pre>

            <br>
            <p>Las funciones pueden recibir información mediante argumentos </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    function saludo(nombre, localidad) {
        console.log(`Hola a ${nombre} desde ${localidad}`);
    }
    
    saludo('Luis', 'Valencia');
    // Hola a Luis desde Valencia                
            </code></pre>

            <br>
            <p>Se pueden definir argumentos por defecto para definir valores predefinidos </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    function saludaA(nombre='todos') {
        console.log(`Hola a ${nombre}`);
    }
    
    saludaA();
    // Hola a todos
    saludaA('Luis');
    // Hola a Luis                             
            </code></pre>

            <br>
            <p>Las funciones pueden devolver información mediante return. También sirve para salir de las funciones </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    function saluda() {
        return 'Hola a todos';
    }
    
    const texto = saluda();
    
    console.log(texto);
    // Hola a todos
            </code></pre>

            <br>
            <p>Las funciones pueden llamar a otras funciones o a sí mismas (recursividad) </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    function adivinarNumero() {
        // Variables
        const numeroAdivinar = 4;
        const respuesta = prompt('Del 1 al 5, ¿en que número estoy pensando?');
        // Lógica
        if (respuesta == numeroAdivinar) {
            alert("¡Lo has adivinado!")
            return true;
        }
        return adivinarNumero();
    }
    
    adivinarNumero();                
            </code></pre>

            <br>
            <p>Las funciones deben ser comentadas para la posterior documentación del proyecto. Se utiliza la sintaxis
                /** */ <br>
                También nos podemos apoyar en extensiones como Codeium para generar estos comentarios</p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    /**
    * Adivina un número entre 1 y 5
    *
    * Pide un número al usuario y si coincide con el número secreto
    * (3) muestra un mensaje de "Has ganado" y devuelve true.
    * Si no coincide, vuelve a llamar a si misma hasta que el usuario
    * acierte el número.
    *
    * @return {boolean} True si el usuario acierta el número
    */
    function adivinarNumero() {
        const adv = 3;
        const respuesta = window.prompt("introduce un número del 1 al 5");
    
        if (respuesta == adv) {
            alert("Has ganado");
            return true;
        }
    
        return adivinarNumero();
    }              
            </code></pre>

            <div class="linea-texto"> <span>Exportar e importar funciones</span> </div>
            <!------------------------------------------------------------------------------------------------------------------->
            <p>Para poder importar funciones, debemos agregarel atributo type="module" a la carga del archivo JS </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    &lt;script defer type="module" src="../js/scripts.js">&lt;/script>
            </code></pre>

            <br><br>
            <p>Para exportar funciones, variables... podemos hacerlo de dos formas:
            <ul class="lista">
                <li>Añadiendo la palabra export antes de la declaración</li>
                <li>Añadiendo exports al final del archivo, inidicando cuales son las funciones a exportar</li>
            </ul>
            </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    export const name = "Jesse";
    export const age = 40;

    //o

    const name = "Moi";
    const age = 35;
                export {name, age};
            </code></pre>

            <br><br>
            <p>Para importar utilizamos import. Podemos importar todas las funciones con * Añadiendo un alias que
                utilizaremos para llamar a las diferentes funciones </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    import { name, age } from "./person.js";

    //organizarlo

    import * as saludo from './saludo.js';
    console.log(saludo.name);  // Moi
            </code></pre>

            <br><br>
            <p>También podemos utilizar la exportación e importación por defecto. Tiene unos ligeros cambios en la
                sintaxis, y solo se puede definir un elemento por defecto en cada archivo </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    const message = () => {
        const name = "Moi";
        const age = 35;
        return name + ' tiene ' + age + ' años';
        };
        
    export default message;

    //
    import message from "./message.js";                
            </code></pre>

            <br><br>
            <p>Importación dinámica. Podemos importar las funciones a medida que se necesiten, de esta forma reducimos
                la carga </p>
            <pre><code class="language-js"> <!-- Clase que importa el diseño de consola -->
    //en archivo script.js
    if (pagina == "cbasicos.html") {
        import("/js/funciones.js")
            .then((module) => {
                module.cbasico();
            })
            .catch((error) => {
                console.error("Error al cargar el módulo:", error);
            });
        cbasico();
    }

    //en archivo funciones.js
    export function cbasicos() {
        //8 código js que se ejecutrá cuando se carga el html cbasicos.html
        document.getElementById("intro").innerHTML =
            "Este texto ha sido cambiado con Js. Archivo script.js";
    
        //Añadimos un escuchador de eventos a un elemento html
        document.getElementById("color").addEventListener("click", cambiarColor);
        document
            .getElementById("inputbutton")
            .addEventListener("click", saludarprompt); //se puede llamar a la función saludar para utilizar el input
        document.getElementById("inputb").addEventListener("click", () => {
            saludar(); // Ejecutamos la función cuando se hace clic
        });
    
        document.getElementById("amodal").addEventListener("click", () => {
            abrirModal(); // Ejecutamos la función cuando se hace clic
        });
    
        document.getElementById("cmodal").addEventListener("click", () => {
            cerrarModal(); // Ejecutamos la función cuando se hace clic
        });
    
        document.getElementById("asi").addEventListener("click", () => {
            accionSi(); // Ejecutamos la función cuando se hace clic
        });
    }
                
            </code></pre>



        </section>
    </main>

    <!-- Contenedor del footer (se carga dinámicamente) -->
    <footer id="footer-container"></footer>

</body>

</html>